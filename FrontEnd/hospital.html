<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Doctor Portal ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <!-- Chart.js CDN (only external resource) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- ---------- Embedded CSS (Apple-inspired glassmorphism + Dark Mode) ---------- -->
  <style>
    /* doctor-dashboard.html - standalone CSS */
    :root{
      --bg: linear-gradient(180deg,#f7f9fc 0%, #eef4ff 100%);
      --surface: rgba(255,255,255,0.78);
      --glass-border: rgba(255,255,255,0.6);
      --muted: #6b7280;
      --text: #0b1220;
      --primary-grad: linear-gradient(90deg,#4facfe,#00f2fe);
      --accent: #9b8cff;
      --shadow: 0 8px 30px rgba(12,18,34,0.06);
      --radius: 14px;
      --glass-blur: 10px;
    }
    body.dark{
      --bg: linear-gradient(180deg,#02050a,#071226);
      --surface: rgba(24,28,36,0.62);
      --glass-border: rgba(255,255,255,0.04);
      --muted: #9aa4bf;
      --text: #e8f0ff;
      --primary-grad: linear-gradient(90deg,#4facfe,#6dd3ff);
      --accent: #b39bff;
      --shadow: 0 12px 40px rgba(2,6,18,0.6);
    }

    *{box-sizing:border-box;transition:all .28s cubic-bezier(.2,.9,.2,1);-webkit-font-smoothing:antialiased}
    html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, "Helvetica Neue",Arial}
    body{background:var(--bg);color:var(--text);line-height:1.4}

    /* Layout */
    .container{display:flex;min-height:100vh}
    .sidebar{
      width:260px;padding:26px;background:linear-gradient(180deg,rgba(255,255,255,0.06),rgba(255,255,255,0.02));
      backdrop-filter: blur(var(--glass-blur));border-right:1px solid rgba(255,255,255,0.06);
      box-shadow:var(--shadow);position:fixed;inset:0 auto 0 0;overflow:auto;
    }
    .brand{display:flex;gap:12px;align-items:center;margin-bottom:20px}
    .logo{
      width:48px;height:48px;border-radius:12px;background:var(--primary-grad);display:grid;place-items:center;color:white;font-weight:700;font-size:18px;box-shadow:0 8px 30px rgba(79,172,254,0.2)
    }
    .logo img{width:48px;height:48px;border-radius:12px;}
    .brand h2{margin:0;font-size:17px;font-weight:600;color:var(--text)}

    /* Nav */
    .nav{display:flex;flex-direction:column;gap:8px;margin-top:10px}
    .nav a{
      display:flex;align-items:center;gap:12px;padding:10px;border-radius:12px;color:var(--text);text-decoration:none;font-weight:600;
      background:transparent;border:1px solid transparent;
    }
    .nav a .ico{width:40px;height:40px;border-radius:10px;display:grid;place-items:center;background:linear-gradient(180deg,rgba(255,255,255,0.06),rgba(255,255,255,0.02));font-size:15px}
    .nav a.active,.nav a:hover{background:linear-gradient(180deg,rgba(255,255,255,0.06),rgba(255,255,255,0.02));transform:translateY(-2px)}

    /* main content */
    .main{margin-left:260px;flex:1;padding:26px}
    .topbar{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:12px}
    .topbar-left{display:flex;align-items:center;gap:16px}
    .page-title{font-size:20px;font-weight:700}
    .topbar .muted{color:var(--muted);font-size:13px}

    /* search */
    .search{display:flex;align-items:center;gap:8px;background:var(--surface);padding:8px 12px;border-radius:12px;border:1px solid var(--glass-border);backdrop-filter: blur(var(--glass-blur));box-shadow:var(--shadow)}
    .search input{border:none;background:transparent;outline:none;color:var(--text);font-size:14px}

    /* theme toggle */
    .theme-toggle{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:12px;border:1px solid var(--glass-border);background:var(--surface);cursor:pointer;font-weight:600}
    .theme-toggle:focus{outline:3px solid rgba(79,172,254,0.18)}

    /* avatar */
    .avatar{width:46px;height:46px;border-radius:12px;overflow:hidden;box-shadow:0 8px 20px rgba(2,6,23,0.08)}
    .avatar img{width:100%;height:100%;object-fit:cover}

    /* grid & cards */
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:18px}
    .card{background:var(--surface);border-radius:var(--radius);padding:16px;border:1px solid var(--glass-border);box-shadow:var(--shadow)}
    .col-3{grid-column:span 3}
    .col-4{grid-column:span 4}
    .col-6{grid-column:span 6}
    .col-8{grid-column:span 8}
    .col-12{grid-column:span 12}

    .kpi .label{font-size:13px;color:var(--muted)}
    .kpi .value{font-size:22px;font-weight:800;margin-top:6px}
    .kpi .muted{font-size:13px;color:var(--muted)}

    .row-col{display:flex;flex-direction:column;gap:10px}
    .appt{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.03),transparent)}

    .table{width:100%;border-collapse:collapse}
    .table thead th{font-weight:700;text-align:left;padding:12px 14px;color:var(--muted)}
    .table tbody td{padding:12px 14px;border-top:1px solid rgba(0,0,0,0.04)}
    .table tbody tr:hover{background:linear-gradient(90deg,rgba(255,255,255,0.02),transparent)}

    /* inputs & buttons */
    .input{padding:10px;border-radius:10px;border:1px solid var(--glass-border);background:transparent;outline:none}
    .search-input{padding:8px;border-radius:10px;border:1px solid var(--glass-border);background:transparent}

    .btn{padding:8px 14px;border-radius:10px;border:none;background:linear-gradient(90deg,#4facfe,#00f2fe);color:#fff;font-weight:700;cursor:pointer;box-shadow:0 8px 18px rgba(79,172,254,0.12)}
    .btn.ghost{background:transparent;border:1px solid var(--glass-border);color:var(--text);font-weight:700}

    .label{font-size:13px;color:var(--muted)}
    .muted{color:var(--muted);font-size:13px}

    /* responsive */
    @media (max-width:980px){
      .sidebar{width:78px;padding:12px}
      .brand h2{display:none}
      .nav a span{display:none}
      .main{margin-left:78px;padding:18px}
      .grid{gap:12px}
      .col-3{grid-column:span 6}
      .col-4{grid-column:span 6}
    }
    @media (max-width:520px){
      .sidebar{position:fixed;bottom:0;left:0;width:100%;height:64px;display:flex;align-items:center;border-right:none;border-top:1px solid rgba(255,255,255,0.03)}
      .brand{display:none}
      .main{margin-left:0;padding:12px;padding-bottom:88px}
      .topbar{flex-direction:column;align-items:flex-start;gap:10px}
      .grid{grid-template-columns:repeat(2,1fr)}
      .col-12{grid-column:span 2}
    }

    /* small utility for subtle footer note */
    .footer-note{font-size:12px;color:var(--muted);margin-top:12px}
  </style>
</head>
<body>
  <div class="container" id="appRoot">
    <!-- Sidebar -->
    <aside class="sidebar" role="navigation" aria-label="Main sidebar">
      <div class="brand">
        <div class="logo"><img src="pics/logo.png" alt=""></div>
        <h2>Doctor Portal</h2>
      </div>

      <nav class="nav" id="mainNav" aria-label="Primary Navigation">
        <a href="hospital.html" class="active"><span class="ico">üè†</span><span>Dashboard</span></a>
        <a href="patients.html"><span class="ico">üë•</span><span>Patients</span></a>
        <a href="appointments.html"><span class="ico">üìÖ</span><span>Appointments</span></a>
        <a href="doctor-access.html"><span class="ico">üîê</span><span>Access Requests</span></a>
        <a href="doctor-upload-record.html"><span class="ico">‚¨ÜÔ∏è</span><span>Upload Record</span></a>
        <a href="doctor-profile.html"><span class="ico">üë§</span><span>Profile</span></a>
        <a href="login.html"><span class="ico">üîê</span><span>LogOUT</span></a>
      </nav>

      <div style="margin-top:18px;color:var(--muted);font-size:13px">
        <div style="margin-bottom:6px">Node Status</div>
        <div style="background:linear-gradient(90deg,#4facfe,#00f2fe);color:white;padding:8px;border-radius:10px;display:inline-block">Online ‚Ä¢ 12 nodes</div>
      </div>
    </aside>

    <!-- Main -->
    <div class="main" role="main">
      <header class="topbar" role="banner" aria-label="Topbar">
        <div class="topbar-left">
          <div>
            <div class="page-title">Dashboard</div>
            <div class="muted">Welcome back, Dr. Verma</div>
          </div>
        </div>

        <div class="topbar-right" style="display:flex;align-items:center;gap:12px">
          <div class="search" role="search" aria-label="Search patients">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="opacity:.6"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
            <input placeholder="Search patients, records..." aria-label="Search" />
          </div>

          <button id="themeToggle" class="theme-toggle" aria-pressed="false" aria-label="Toggle dark mode">
            <span id="themeIcon">üåô</span> <span id="themeText">Dark</span>
          </button>

          <div class="avatar" title="Dr. Amit Verma">
            <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'><rect width='100%' height='100%' fill='%2388b7ff'/><text x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' font-size='80' fill='white'>MD</text></svg>" alt="Doctor avatar" />
          </div>
        </div>
      </header>

      <!-- Page content -->
      <main>
        <section class="grid" style="margin-top:8px">
          <div class="card col-3 kpi">
            <div class="label">Today's Patients</div>
            <div class="value">18</div>
            <div class="muted">4 new today</div>
          </div>

          <div class="card col-3 kpi">
            <div class="label">Pending Access</div>
            <div class="value">3</div>
            <div class="muted">Awaiting patient approval</div>
          </div>

          <div class="card col-3 kpi">
            <div class="label">Records This Week</div>
            <div class="value">34</div>
            <div class="muted">Uploaded / updated</div>
          </div>

          <div class="card col-3 kpi">
            <div class="label">Blockchain TX</div>
            <div class="value">8,192</div>
            <div class="muted">Verified</div>
          </div>

          <div class="card col-8" style="height:320px;">
            <canvas id="weeklyChart" data-chart="line" data-title="Patients / Week" data-labels='["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]' data-values='[6,9,7,11,10,4,8]'></canvas>
          </div>

          <div class="card col-4">
            <h4 style="margin:0 0 12px 0">Upcoming Appointments</h4>
            <div class="row-col">
              <div class="appt"><div><strong>John Doe</strong></div><div class="muted">10:30 AM</div></div>
              <div class="appt"><div><strong>Ananya Gupta</strong></div><div class="muted">01:00 PM</div></div>
              <div class="appt"><div><strong>Rohit Mehra</strong></div><div class="muted">03:45 PM</div></div>
            </div>
            <div class="footer-note">Tap a row to open appointment details (demo).</div>
          </div>

          <div class="card col-12" style="margin-top:10px">
            <h4 style="margin:0 0 12px 0">Recent Records</h4>
            <table class="table" role="table" aria-label="Recent records">
              <thead><tr><th>Type</th><th>Patient</th><th>Date</th><th>Hash</th><th></th></tr></thead>
              <tbody>
                <tr><td>Lab Report</td><td>Priya Singh</td><td>14-Nov-2025</td><td>0x129af9bd</td><td><button class="btn" data-action="view-record">View</button></td></tr>
                <tr><td>X-Ray</td><td>Rahul Sharma</td><td>10-Nov-2025</td><td>0x78ac32be</td><td><button class="btn ghost" data-action="download">Download</button></td></tr>
              </tbody>
            </table>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- ---------- Embedded JS (dark mode, chart init, small behaviors) ---------- -->
  <script>
     // Logout button behavior
    document.getElementById("logoutBtn").addEventListener("click", function() {
        alert("You have been logged out.");
        window.location.href = "../login.html";
    });
    // Standalone page JS
    (function(){
      // Elements
      const themeToggle = document.getElementById('themeToggle');
      const themeIcon = document.getElementById('themeIcon');
      const themeText = document.getElementById('themeText');
      const THEME_KEY = 'doctor_dashboard_theme_v1';

      // Apply theme function
      function applyTheme(t){
        if(t === 'dark'){
          document.body.classList.add('dark');
          themeToggle.setAttribute('aria-pressed','true');
          themeIcon.textContent = '‚òÄÔ∏è';
          themeText.textContent = 'Light';
        } else {
          document.body.classList.remove('dark');
          themeToggle.setAttribute('aria-pressed','false');
          themeIcon.textContent = 'üåô';
          themeText.textContent = 'Dark';
        }
      }

      // Load saved or OS preference
      const saved = localStorage.getItem(THEME_KEY);
      if(saved) applyTheme(saved);
      else {
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        applyTheme(prefersDark ? 'dark' : 'light');
      }

      // Toggle handler
      themeToggle.addEventListener('click', () => {
        const isNowDark = document.body.classList.toggle('dark');
        applyTheme(isNowDark ? 'dark' : 'light');
        localStorage.setItem(THEME_KEY, isNowDark ? 'dark' : 'light');
      });

      themeToggle.addEventListener('keyup', (e) => {
        if(e.key === 'Enter' || e.key === ' ') themeToggle.click();
      });

      // Activate nav highlighting based on filename
      (function highlightNav(){
        const links = document.querySelectorAll('.nav a');
        const file = location.pathname.split('/').pop().toLowerCase();
        links.forEach(a => {
          const href = (a.getAttribute('href') || '').toLowerCase();
          a.classList.toggle('active', href.endsWith(file) || (file === '' && href.includes('dashboard')));
        });
      })();

      // Chart.js init (if available)
      (function initCharts(){
        if(!window.Chart) return;
        const ctx = document.getElementById('weeklyChart');
        if(!ctx) return;
        const labels = JSON.parse(ctx.getAttribute('data-labels') || '[]');
        const values = JSON.parse(ctx.getAttribute('data-values') || '[]');
        new Chart(ctx.getContext('2d'), {
          type: 'line',
          data: {
            labels: labels,
            datasets: [{
              label: 'Patients / Week',
              data: values,
              fill: true,
              tension: 0.35,
              borderColor: '#4facfe',
              pointRadius: 3,
              backgroundColor: (ctx) => {
                const g = ctx.chart.ctx.createLinearGradient(0,0,0,300);
                if(document.body.classList.contains('dark')){
                  g.addColorStop(0, 'rgba(124,140,255,0.18)');
                  g.addColorStop(1, 'rgba(124,140,255,0.02)');
                } else {
                  g.addColorStop(0, 'rgba(79,172,254,0.16)');
                  g.addColorStop(1, 'rgba(79,172,254,0.02)');
                }
                return g;
              }
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: { x: { grid: { display: false } }, y: { grid: { color: 'rgba(0,0,0,0.04)' } } }
          }
        });
      })();

      // Small demo handlers for table buttons
      document.querySelectorAll('button[data-action="view-record"]').forEach(b => {
        b.addEventListener('click', () => alert('Open record viewer (hook to modal / page).'));
      });
      document.querySelectorAll('button[data-action="download"]').forEach(b => {
        b.addEventListener('click', () => alert('Start download (integrate real download).'));
      });

    })();
  </script>
</body>
</html>
